# ユーザーマニュアル

## 🎯 はじめに

SBOM Vulnerability Checkerへようこそ! このマニュアルでは、アプリケーションの基本的な使い方から高度な機能まで、わかりやすく説明します。

## 📚 目次

1. [初回ログイン](#初回ログイン)
2. [SBOMのアップロード](#sbomのアップロード)
3. [脆弱性スキャン](#脆弱性スキャン)
4. [結果の確認](#結果の確認)
5. [レポート出力](#レポート出力)
6. [履歴管理](#履歴管理)
7. [よくある質問](#よくある質問)

## 🚪 初回ログイン

### アクセス方法

1. Webブラウザを開きます(Chrome、Firefox、Edge推奨)
2. アドレスバーに `http://localhost:3000` を入力
3. ダッシュボードが表示されます

### ダッシュボード概要

ダッシュボードには以下の情報が表示されます:

- **アップロード済みSBOM数**: 現在登録されているSBOMファイルの総数
- **総脆弱性数**: 検出された脆弱性の総数
- **深刻度別グラフ**: CRITICAL、HIGH、MEDIUM、LOWの割合
- **最近のスキャン**: 直近のスキャン結果一覧

## 📤 SBOMのアップロード

### 対応フォーマット

以下のSBOM形式に対応しています:

- **CycloneDX** (JSON/XML)
  - バージョン: 1.2, 1.3, 1.4, 1.5
- **SPDX** (JSON/XML)
  - バージョン: 2.2, 2.3

### アップロード手順

#### 方法1: ドラッグ&ドロップ

1. ダッシュボード上部の**アップロードゾーン**を確認
2. SBOMファイルをドラッグ
3. アップロードゾーンにドロップ

```
┌─────────────────────────────────────┐
│  📁 ここにSBOMファイルをドロップ      │
│                                     │
│  または クリックしてファイルを選択   │
│                                     │
│  対応形式: JSON, XML                │
│  最大サイズ: 50MB                   │
└─────────────────────────────────────┘
```

#### 方法2: ファイル選択

1. アップロードゾーンをクリック
2. ファイル選択ダイアログが表示されます
3. SBOMファイルを選択して「開く」をクリック

### アップロード後の処理

ファイルがアップロードされると:

1. **ファイル検証**: 形式とサイズをチェック
2. **重複チェック**: 同じファイルが既にないか確認
3. **パース処理**: SBOMを解析してコンポーネント抽出
4. **自動スキャン開始**: 脆弱性診断が自動的に開始されます

### アップロード時のエラー

| エラーメッセージ | 原因 | 対処方法 |
|----------------|------|---------|
| "サポートされていない形式です" | 非対応ファイル形式 | JSON/XMLファイルを使用 |
| "ファイルサイズが大きすぎます" | 50MB超過 | ファイルを分割または圧縮 |
| "既にアップロード済みです" | 重複ファイル | 既存のスキャン結果を確認 |
| "ファイルが破損しています" | 不正なフォーマット | ファイルを再生成 |

## 🔍 脆弱性スキャン

### 自動スキャン

SBOMをアップロードすると、自動的にスキャンが開始されます。

**スキャンプロセス:**

```
1. キューに追加 ───> 2. 実行中 ───> 3. 完了
   (数秒)          (30秒〜5分)      (結果表示)
```

### 手動スキャン

既存のSBOMに対して再スキャンを実行できます:

1. SBOMリストから対象を選択
2. 「再スキャン」ボタンをクリック
3. 確認ダイアログで「実行」をクリック

### スキャンステータス

| ステータス | 説明 | 表示色 |
|----------|------|-------|
| キュー待機中 | スキャン待機中 | 🟡 黄色 |
| 実行中 | スキャン処理中 | 🔵 青色 |
| 完了 | スキャン成功 | 🟢 緑色 |
| 失敗 | エラー発生 | 🔴 赤色 |

### スキャン時間の目安

| コンポーネント数 | 予想時間 |
|----------------|---------|
| 1-50個 | 30秒〜1分 |
| 51-200個 | 1分〜3分 |
| 201-500個 | 3分〜5分 |
| 501個以上 | 5分以上 |

## 📊 結果の確認

### サマリー表示

スキャン完了後、以下の情報が表示されます:

```
╔══════════════════════════════════════╗
║     脆弱性診断結果サマリー            ║
╠══════════════════════════════════════╣
║ ファイル名: example-sbom.json       ║
║ スキャン日時: 2025-10-16 12:15      ║
║ 総コンポーネント数: 45               ║
║ 脆弱性検出数: 18                    ║
║ ─────────────────────────────────   ║
║ 🔴 CRITICAL:  2                     ║
║ 🟠 HIGH:      5                     ║
║ 🟡 MEDIUM:    8                     ║
║ 🟢 LOW:       3                     ║
╚══════════════════════════════════════╝
```

### 詳細リスト

脆弱性一覧には以下の情報が表示されます:

**表示項目:**
- CVE ID
- コンポーネント名
- バージョン
- 深刻度
- CVSSスコア
- 説明
- 対処方法

**ソート機能:**
- 深刻度順
- CVSSスコア順
- CVE ID順
- コンポーネント名順

**フィルタ機能:**
- 深刻度でフィルタ
- コンポーネントでフィルタ
- キーワード検索

### 脆弱性詳細の確認

各脆弱性をクリックすると詳細が表示されます:

```
┌─────────────────────────────────────────┐
│ CVE-2023-12345                          │
├─────────────────────────────────────────┤
│ コンポーネント: express                  │
│ バージョン: 4.18.2                       │
│                                         │
│ 深刻度: HIGH (7.5)                      │
│ CVSS Vector: CVSS:3.1/AV:N/AC:L/...    │
│                                         │
│ 説明:                                   │
│ Express.jsの認証処理に脆弱性が...       │
│                                         │
│ 対処方法:                               │
│ ✅ バージョン 4.19.0 以降に更新         │
│                                         │
│ 参考リンク:                             │
│ • NVD: https://nvd.nist.gov/...        │
│ • GitHub Advisory: https://...          │
└─────────────────────────────────────────┘
```

### グラフ表示

以下のグラフで視覚的に確認できます:

1. **深刻度別円グラフ**: 全体の割合を表示
2. **コンポーネント別棒グラフ**: 脆弱性が多いコンポーネントTop 10
3. **時系列グラフ**: 過去のスキャン結果の推移

## 📄 レポート出力

### エクスポート形式

3種類の形式でレポートをエクスポートできます:

#### 1. JSON形式

プログラムで処理しやすい形式です。

**使用例:**
- CI/CDパイプラインでの自動処理
- 他システムとの連携
- カスタム分析

**出力手順:**
1. スキャン結果画面で「エクスポート」をクリック
2. 「JSON」を選択
3. ファイルがダウンロードされます

#### 2. PDF形式

読みやすいレポート形式です。

**含まれる情報:**
- 表紙(プロジェクト情報)
- エグゼクティブサマリー
- 脆弱性一覧(詳細付き)
- グラフ
- 推奨事項

**使用例:**
- 経営層への報告
- 監査資料
- 保管用記録

**出力手順:**
1. スキャン結果画面で「エクスポート」をクリック
2. 「PDF」を選択
3. レポート生成中...
4. PDFファイルがダウンロードされます

#### 3. CSV形式

表計算ソフトで扱いやすい形式です。

**使用例:**
- Excelでの分析
- データベースへのインポート
- カスタムレポート作成

**出力手順:**
1. スキャン結果画面で「エクスポート」をクリック
2. 「CSV」を選択
3. ファイルがダウンロードされます

### レポートのカスタマイズ

PDFレポート生成時にカスタマイズできます:

- [ ] 深刻度フィルタ(例: HIGHとCRITICALのみ)
- [ ] 特定コンポーネントのみ
- [ ] グラフの表示/非表示
- [ ] 推奨事項の表示/非表示

## 📜 履歴管理

### スキャン履歴の確認

左メニューの「履歴」から過去のスキャン結果を確認できます。

**表示情報:**
- スキャン日時
- SBOMファイル名
- 検出された脆弱性数
- ステータス

**便利な機能:**
- 日付範囲でフィルタ
- SBOMファイルで検索
- 結果の比較

### 履歴の比較機能

2つのスキャン結果を比較できます:

1. 履歴リストで比較したい2つを選択
2. 「比較」ボタンをクリック
3. 差分が表示されます

**比較結果:**
- 新たに検出された脆弱性
- 解消された脆弱性
- 変化のない脆弱性

### データの削除

不要なSBOMやスキャン結果を削除できます:

1. リストから削除対象を選択
2. 「削除」ボタンをクリック
3. 確認ダイアログで「削除」をクリック

**注意:** 削除したデータは復元できません!

## ⚙️ 設定

### 通知設定(将来実装予定)

- メール通知
- Slack通知
- Webhook連携

### 自動スキャン設定

- 定期スキャンのスケジュール設定
- 新規アップロード時の自動スキャン有効/無効

## 💡 便利なTips

### 1. キーボードショートカット

| ショートカット | 機能 |
|--------------|------|
| Ctrl + U | ファイルアップロード |
| Ctrl + E | エクスポート |
| Ctrl + F | 検索 |
| Esc | ダイアログを閉じる |

### 2. 効率的な運用方法

**推奨ワークフロー:**

```
1. 開発時にSBOM生成
   ↓
2. アップロードして即座にスキャン
   ↓
3. CRITICAL/HIGHを優先的に対応
   ↓
4. 修正後、再度SBOMを生成してスキャン
   ↓
5. 履歴比較で改善を確認
```

### 3. SBOM生成ツール

プロジェクトからSBOMを生成するツール:

**Node.js/npm:**
```bash
npm install -g @cyclonedx/cyclonedx-npm
cyclonedx-npm --output-file sbom.json
```

**Python/pip:**
```bash
pip install cyclonedx-bom
cyclonedx-py -o sbom.json
```

**Java/Maven:**
```xml
<!-- pom.xmlに追加 -->
<plugin>
  <groupId>org.cyclonedx</groupId>
  <artifactId>cyclonedx-maven-plugin</artifactId>
</plugin>
```

```bash
mvn cyclonedx:makeAggregateBom
```

## ❓ よくある質問

### Q1: SBOMファイルはどこで入手できますか?

**A:** SBOMは以下の方法で生成できます:
- プロジェクトのビルドツールで生成(npm, pip, maven等)
- CI/CDパイプラインに組み込む
- ベンダーから提供されたSBOMを使用

### Q2: スキャンに時間がかかりすぎます

**A:** 以下を確認してください:
- コンポーネント数が多い場合は時間がかかります
- 初回スキャンは脆弱性DB構築のため時間がかかる場合があります
- サーバーリソースが不足していないか確認

### Q3: 検出された脆弱性は誤検知ではないですか?

**A:** 可能性があります:
- CPEマッチングの精度による誤検知の可能性
- バージョン番号の曖昧性
- 実際の使用状況を確認して判断してください

### Q4: 脆弱性が検出されたらどうすればいいですか?

**A:** 以下の手順で対応してください:
1. 深刻度を確認(CRITICAL/HIGHを優先)
2. 詳細情報と対処方法を確認
3. パッケージを更新
4. 再スキャンで解消を確認

### Q5: 脆弱性DBはどのくらいの頻度で更新されますか?

**A:** 12時間ごとに自動更新されます。

### Q6: オフライン環境でも使用できますか?

**A:** 初回セットアップ時はインターネット接続が必要です。脆弱性DB構築後はオフラインでも使用可能ですが、最新の脆弱性情報は取得できません。

### Q7: 複数のSBOMを一度にアップロードできますか?

**A:** 現バージョンでは1ファイルずつアップロードしてください。将来のバージョンで対応予定です。

### Q8: APIを使って自動化できますか?

**A:** はい! [API仕様書](API.md)を参照してください。

## 🆘 トラブルシューティング

### 問題: アップロードボタンが反応しない

**解決方法:**
1. ページをリロード(F5)
2. ブラウザのキャッシュをクリア
3. 別のブラウザで試す

### 問題: スキャンが「実行中」のまま進まない

**解決方法:**
1. ページをリロード
2. 5分以上変化がない場合は管理者に連絡
3. サーバーログを確認

### 問題: レポートがダウンロードできない

**解決方法:**
1. ブラウザのポップアップブロックを確認
2. ダウンロードフォルダの権限を確認
3. 別の形式(JSON→CSV等)で試す

## 📞 サポート

### ヘルプが必要な場合

1. このマニュアルで解決しない場合
2. [運用・保守ガイド](OPERATIONS.md)を確認
3. GitHubでIssueを作成
4. 管理者に連絡

### フィードバック

アプリケーションの改善提案やバグ報告は大歓迎です!
GitHubのIssueまたはPull Requestでお願いします。

---

**最終更新: 2025年10月16日**
